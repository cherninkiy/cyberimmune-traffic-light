entities:
# The `Connector` entity can call `ControlSystem`
- name: traffic_light.Connector
  env:
    VFS_NETWORK_BACKEND: client:kl.VfsNet
  connections:
  - target: traffic_light.Diagnostics
    id: diagnostics_channel
  - target: kl.VfsNet
    id: kl.VfsNet    
@INIT_Connector_ENTITY_CONNECTIONS+@
# The `ControlSystem` entity can call `CrossChecker`
- name: traffic_light.ControlSystem
  connections:
  - target: traffic_light.CrossChecker
    id: crossmode_channel
  - target: traffic_light.Connector
    id: trafficmode_channel
  - target: traffic_light.Diagnostics
    id: diagnostics_channel
# The `CrossChecker` entity can call `LightsGPIO's` and `Diagnostics`
- name: traffic_light.CrossChecker
  connections:
  - target: traffic_light.LightsGPIO1
    id: lightsGpio1_channel
  - target: traffic_light.LightsGPIO2
    id: lightsGpio2_channel
  - target: traffic_light.Diagnostics
    id: diagnostics_channel
# The `LightsGPIO1` entity can call `Diagnostics`.
- task: traffic_light.LightsGPIO1
  name: traffic_light.LightsGPIO
  path: LightsGPIO1
  connections:
  - target: traffic_light.Diagnostics
    id: diagnostics_channel
# The `LightsGPIO2` entity can call `Diagnostics`.
- task: traffic_light.LightsGPIO2
  name: traffic_light.LightsGPIO
  path: LightsGPIO2
  connections:
  - target: traffic_light.Diagnostics
    id: diagnostics_channel
# The `Diagnostics` entity can only respond to requests.
- name: traffic_light.Diagnostics

@INIT_EXTERNAL_ENTITIES@