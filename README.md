# Traffic lights control with KasperskyOS

## Описание задачи

### О примере

Функционально пример представляет из себя заготовку системы управления для светофора. Предлагается реализовать несколько сущностей, описанных в архитектуре системы, а также реализовать политики безопасности, которые обеспечат работу системы согласно политике архитектуры.

Цели и предположения безопасности обсуждаются на онлайн-курсе (ссылка будет добавлена позже). 

### Инструкция по настройке окружения для разработки

#### Настройка системы

Пошаговая видео-инструкция по развёртыванию KasperskyOS в виртуальной машине под управлением Oracle VirtualBox доступна в составе этого курса: https://stepik.org/course/73418

Использование KasperskyOS в docker контейнере описано на этой странице: https://support.kaspersky.ru/help/KCE/1.1/ru-RU/using_docker.htm

### Сборка и запуск примера

* с использованием Makefile:

  *  <b>сборка docker образа с "central-server"</b>. 
    
        ```make d-build-server```

  *  <b>запуск docker образа с "central-server"</b>. 
    
        ```make d-run-server```

        <i>Примечание</i>: обрашение на IP 10.0.2.2

  *  <b>сборка docker образа с KasperskyOS</b>. 
  В этом проекте в качестве базового образа используется Ubuntu 20.04, при желании можно поменять на Ubuntu 22.04 или Debian 10.12.
    
        ```make d-build```   

        <i>Примечание</i>: установочный deb файл с KasperskyOS Community Edition SDK должен быть скопирован в папку с Dockerfile (корневую папку проекта) перед запуском этой команды

        
  *  <b>запуск контейнера</b>

        ```make develop```

        <i>Примечание</i>: в контейнере предполагается работать не от имени root, а от пользователя user. 
        
        Если где-то это будет мешать, нужно в Makefile для цели develop убрать в команде запуска аргумент "--user user"

  * <b> сборка и запуск проекта</b>

    ```make build-sim``` 

        <i>Примечание</i>: эта команда должна выполняться внутри контейнера. 

  *  <b> удаление временных файлов</b>. Сейчас удаляет папку build со всем содержимым. 

        ```make clean``` 
    
        <i>Примечание</i>: удаляет папку build со всем содержимым.

## Домашнее задание: День 3

1. ✅ Реализовать все сущности и взаимодействия согласно политике архитектуры

2. ✅ Обеспечить выполнение целей безопасности за счет проверок конфигураций в отдельной сущности или в мониторе безопасности.

3. ✅ Реализовать передачу диагностической информации в виде структуры "строка и код события" из управления светодиодами в систему диагностики (3 -> 4).

4. ✅ Реализовать передачу кода события из системы диагностики в систему управления светофора  (4 -> 2, через ответ на запрос).

5. ✅ Реализовать передачу кода события из системы управления светофора в систему связи (2 -> 1).

6. Реализовать передачу состония светофора на имитатор сервера ГСУДД (1 -> сервер) - сложности связаны с п.5.

7. ✅ Реализовать получение режима работы светофора от имитатора сервера ГСУДД (сервер -> 1).

8. ✅ Реализовать передачу режима работы светофора из связи в систему управления светофором (1 -> 2).

9. ✅ В системе управления светофором реализовать запись режима работы в виртуальную файловую систему.
